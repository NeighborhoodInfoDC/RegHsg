currentfips <- "51107"
filepath <- "loudoun"
#### Load in Black Knight data for the region, select jurisdiction and standard variables
if (!exists("region")) {
region <- read_bk("dc-cog-assessment_20181228.csv")
} else {
warning("region data already read in")
}
jur <- region %>%
filter_bk(fips = currentfips) %>%
select_vars()
ls()
## Recategorize county land use
In order to complete the vacant land and soft site analysis, we will need to break down properties into different classifications. This process creates four variables:
1. residential: 1 for residential, 0 for other.
2. category: categories are sf, mf, commercial, office, and vacant.
3. category_detail: this will vary by jurisdiction, but  includes the most detail possible to generalize from the county land use codes.
4. building_type: this indicates the building type for multifamily parcels (condos and apartments)
Export county land use codes for manual classification
currentjur_county <- jur %>%
group_by(countylandusedescription) %>%
count()
if (!file.exists(paste0("../Data/", filepath, "-county-land-use.csv"))) {
write_csv(currentjur_county,
paste0("../Data/", filepath, "-county-land-use.csv"))
}
rm(currentjur_county)
**Note:** Condos that have their own individual addresses are considered single-family. Once we determine which properties have unique addresses, the `category` and `category_detail` will be adjusted to "SF" and "SF attached" respectively.
### Create categorization variables
We use `ifelse()` and `case_when()` to create the three new variables based on the county land use codes.
#### {.tabset .tabset.fade}
##### `residential`
res_codes <-
c("AFFORDABLE DWELLING UNIT",
"APARTMENT - GARDEN",
"APARTMENT - HIGH-RISE",
"APARTMENT - MID-RISE",
"APARTMENT - PARKING",
"COMMUNITY BENEFIT UNIT",
"MULTI-FAM IMPR/NO SITE PLAN",
"MULTI-FAM IMPR/SITE PLAN",
"MULTI-FAM VACANT/NO SITE PLAN",
"MULTI-FAM VACANT/SITE PLAN",
"NOT VALUED CONDO HOA",
"NOT VALUED COSTED - HOA/SITE PLAN",
"RESIDENTIAL COST-VAL - DUPLEX",
"RESIDENTIAL COST-VAL - IMPR/SF & TW",
"RESIDENTIAL COST-VAL - SIDE BY SIDE",
"RESIDENTIAL COST-VAL - SINGLE-FAM DET",
"RESIDENTIAL COST-VAL - TOWNHOUSE/CO",
"RESIDENTIAL COST-VAL - TOWNHOUSE/FSO",
"RESIDENTIAL COST-VAL - VAC/SF & TW",
"SALES APPR CONDO/CO-OP",
"SALES APPR CONDO/GARDEN",
"SALES APPR CONDO/HIGH RISE",
"SALES APPR CONDO/MID RISE",
"SALES APPR CONDO/STACKED",
"SFD - APT ZONED/NO SITE PLAN",
"SFD - APT ZONED/SITE PLAN",
"VACANT RESIDENTIAL",
"SFD - COMM ZONED/NO SITE PLAN",
"SFD - COMM ZONED/SITE PLAN")
jur <- jur %>%
mutate(residential =
ifelse(countylandusedescription %in% res_codes, 1, 0))
rm(res_codes)
##### `category`
View(jur)
View(jur)
View(parcel)
View(property)
View(region)
View(region)
View(region)
View(region)
View(region)
View(jur)
res_codes <-
c("CONDOMINIUM (RESIDENTIAL)",
"DUPLEX",
"MOBILE/MANUFACTURED HOMES",
"MULTI-FAMILY",
"MULTI-FAMILY - VACANT",
"RES CONDO GARAGE UNIT",
"RESIDENTIAL CONDOS",
"RURAL RESIDENCE (AGRICULTURAL)",
"RURAL RESIDENCE AGRICULTURAL",
"SINGLE FAMILY",
"SINGLE FAMILY - VACANT",
"TOWN HOUSES",
"TOWN HOUSES - VACANT",
"TRAILER PARK",
"TRAILER PARK - VACANT")
jur <- jur %>%
mutate(residential =
ifelse(countylandusedescription %in% res_codes, 1, 0))
rm(res_codes)
View(jur)
##### `category`
res_codes <-
c("CONDOMINIUM (RESIDENTIAL)",
"DUPLEX",
"MOBILE/MANUFACTURED HOMES",
"MULTI-FAMILY",
"MULTI-FAMILY - VACANT",
"MULTIPLE OCCUPANCIES",
"RES CONDO GARAGE UNIT",
"RESIDENTIAL CONDOS",
"RURAL RESIDENCE (AGRICULTURAL)",
"RURAL RESIDENCE AGRICULTURAL",
"SINGLE FAMILY",
"SINGLE FAMILY - VACANT",
"TOWN HOUSES",
"TOWN HOUSES - VACANT",
"TRAILER PARK",
"TRAILER PARK - VACANT")
jur <- jur %>%
mutate(residential =
ifelse(countylandusedescription %in% res_codes, 1, 0))
rm(res_codes)
res_codes <-
c("CONDOMINIUM (RESIDENTIAL)",
"DUPLEX",
"MOBILE/MANUFACTURED HOMES",
"MULTI-FAMILY",
"MULTI-FAMILY - VACANT",
"MULTIPLE OCCUPANCIES",
"RES CONDO GARAGE UNIT",
"RESIDENTIAL CONDOS",
"RURAL RESIDENCE (AGRICULTURAL)",
"RURAL RESIDENCE AGRICULTURAL",
"SINGLE FAMILY",
"SINGLE FAMILY - VACANT",
"TOWN HOUSES",
"TOWNHOUSES - VACANT",
"TRAILER PARK",
"TRAILER PARK - VACANT")
jur <- jur %>%
mutate(residential =
ifelse(countylandusedescription %in% res_codes, 1, 0))
rm(res_codes)
res_codes <-
c("CONDOMINIUM (RESIDENTIAL)",
"DUPLEX",
"MOBILE/MANUFACTURED HOMES",
"MULTI-FAMILY",
"MULTI-FAMILY - VACANT",
"MULTIPLE OCCUPANCIES",
"RES CONDO GARAGE UNIT",
"RESIDENTIAL CONDOS",
"RURAL RESIDENCE (AGRICULTURAL)",
"RURAL RESIDENCE AGRICULTURAL",
"SINGLE FAMILY",
"SINGLE FAMILY - VACANT",
"TOWN HOUSES",
"TOWNHOUSES - VACANT",
"TRAILER PARK",
"TRAILER PARK - VACANT")
jur <- jur %>%
mutate(residential =
ifelse(countylandusedescription %in% res_codes, 1, 0))
rm(res_codes)
##### `category`
commercial <- c("AUTO SALES",
"AUTOMOTIVE BUILDINGS",
"AUTOMOTIVE BUILDINGS",
"BANK",
"CEMETERY",
"CHURCH",
"COMMERCIAL",
"COMMERCIAL CONDO'S",
"COMMERCIAL CONDOS",
"CONDO-FLEX WAREHOUSE",
"CONDO-WAREHOUSE",
"DATA CENTER",
"FAST FOOD RESTAURANT",
"FLEX WAREHOUSE",
"GAS AND GO",
"GROCERY STORE",
"HOTEL LUXURY",
"LIGHT INDUSTRIAL",
"MEDICAL BUILDING",
"MEDIUM/HEAVY INDUST ",
"MINI WAREHOUSE",
"MISC COMM STRUCTURE",
"MOTEL/HOTEL",
"RESTAURANT",
"RETAIL STORE",
"SHOPPING CENTER",
"WAREHOUSE",
"WINERY")
mf <- c("DUPLEX",
"MULTI-FAMILY",
"MULTIPLE OCCUPANCIES",
"RESIDENTIAL CONDOS",
"CONDOMINIMUM (RESIDENTIAL)",
"RES CONDO GARAGE UNIT")
office <- c("OFFICE BUILDING",
"OFFICE/RETAIL")
sf <- c("RURAL RESIDENCE (AGRICULTURAL)",
"SINGLE FAMILY",
"TOWN HOUSES",
"TRAILER PARK")
vacant <- c("AUTOMOTIVE BUILDINGS - VACANT",
"COMMERCIAL CONDOS - VACANT",
"FLEX WAREHOUSE - VACANT",
"GROCERY STORE - VACANT",
"MINI WAREHOUSE - VACANT",
"MISC COMM STRUCTURE - VACANT",
"MISC COMMERCIAL STRUCTURE - VACANT",
"MISC IMPROVEMENTS - VACANT",
"MULTI-FAMILY - VACANT",
"OFFICE BUILDING - VACANT",
"RECREATIONAL - VACANT",
"RETAIL STORE - VACANT",
"SHOPPING CENTER - VACANT",
"SINGLE FAMILY - VACANT",
"TOWNHOUSES - VACANT",
"TRAILER PARK - VACANT",
"VACANT LAND",
"WAREHOUSE - VACANT",
"WINERY - VACANT")
jur <- jur %>%
mutate(category = case_when(
countylandusedescription %in% commercial ~ "commercial",
countylandusedescription %in% mf ~ "mf",
countylandusedescription %in% office ~ "office",
countylandusedescription %in% sf ~ "sf",
countylandusedescription %in% vacant ~ "vacant"))
rm(commercial, office, mf, sf, vacant)
res_codes <-
c("CONDOMINIUM (RESIDENTIAL)",
"DUPLEX",
"MOBILE/MANUFACTURED HOMES",
"MULTI-FAMILY",
"MULTI-FAMILY - VACANT",
"MULTIPLE OCCUPANCIES",
"RES CONDO GARAGE UNIT",
"RESIDENTIAL CONDOS",
"RURAL RESIDENCE (AGRICULTURAL)",
"RURAL RESIDENCE AGRICULTURAL",
"SINGLE FAMILY",
"SINGLE FAMILY - VACANT",
"TOWN HOUSES",
"TOWNHOUSES - VACANT",
"TRAILER PARK",
"TRAILER PARK - VACANT")
jur <- jur %>%
mutate(residential =
ifelse(countylandusedescription %in% res_codes, 1, 0))
rm(res_codes)
##### `category`
other <- c("AUTO SALES",
"AUTOMOTIVE BUILDINGS",
"AUTOMOTIVE BUILDINGS",
"BANK",
"CEMETERY",
"CHURCH",
"COMMERCIAL",
"COMMERCIAL CONDO'S",
"COMMERCIAL CONDOS",
"CONDO-FLEX WAREHOUSE",
"CONDO-WAREHOUSE",
"DATA CENTER",
"EDUCATIONAL",
"FARM > 20 ACRES",
"FAST FOOD RESTAURANT",
"FIRE DEPT",
"FLEX WAREHOUSE",
"GAS AND GO",
"GOVERNMENT PROPERTY",
"GOVT PROP",
"GROCERY STORE",
"HANGER",
"HOTEL LUXURY",
"IMPROVED, USE NOT SPECIFIED",
"LEASEHOLD RIGHTS (MISC)",
"LIGHT INDUSTRIAL",
"MEDICAL BUILDING",
"MEDIUM/HEAVY INDUST ",
"MINI WAREHOUSE",
"MISC COMM STRUCTURE",
"MISC COMMERCIAL STRUCTURE",
"MISC IMPROVEMENTS",
"MISCELLANEOUS (GENERAL)",
"MOTEL/HOTEL",
"OFFICE BUILDING",
"OFFICE/RETAIL",
"RECREATIONAL",
"RESTAURANT",
"RETAIL STORE",
"SHOPPING CENTER",
"WAREHOUSE",
"WINERY")
mf <- c("DUPLEX",
"MULTI-FAMILY",
"MULTIPLE OCCUPANCIES",
"RESIDENTIAL CONDOS",
"CONDOMINIMUM (RESIDENTIAL)",
"RES CONDO GARAGE UNIT")
office <- c("OFFICE BUILDING",
"OFFICE/RETAIL")
sf <- c("RURAL RESIDENCE (AGRICULTURAL)",
"SINGLE FAMILY",
"MOBILE/MANUFACTURED HOMES",
"TOWN HOUSES",
"TRAILER PARK")
vacant <- c("AUTOMOTIVE BUILDINGS - VACANT",
"COMMERCIAL CONDOS - VACANT",
"FLEX WAREHOUSE - VACANT",
"GROCERY STORE - VACANT",
"MINI WAREHOUSE - VACANT",
"MISC COMM STRUCTURE - VACANT",
"MISC COMMERCIAL STRUCTURE - VACANT",
"MISC IMPROVEMENTS - VACANT",
"MULTI-FAMILY - VACANT",
"OFFICE BUILDING - VACANT",
"RECREATIONAL - VACANT",
"RETAIL STORE - VACANT",
"SHOPPING CENTER - VACANT",
"SINGLE FAMILY - VACANT",
"TOWNHOUSES - VACANT",
"TRAILER PARK - VACANT",
"VACANT LAND",
"WAREHOUSE - VACANT",
"WINERY - VACANT")
jur <- jur %>%
mutate(category = case_when(
countylandusedescription %in% commercial ~ "commercial",
countylandusedescription %in% mf ~ "mf",
countylandusedescription %in% office ~ "office",
countylandusedescription %in% sf ~ "sf",
countylandusedescription %in% vacant ~ "vacant"))
res_codes <-
c("CONDOMINIUM (RESIDENTIAL)",
"DUPLEX",
"MOBILE/MANUFACTURED HOMES",
"MULTI-FAMILY",
"MULTI-FAMILY - VACANT",
"MULTIPLE OCCUPANCIES",
"RES CONDO GARAGE UNIT",
"RESIDENTIAL CONDOS",
"RURAL RESIDENCE (AGRICULTURAL)",
"RURAL RESIDENCE AGRICULTURAL",
"SINGLE FAMILY",
"SINGLE FAMILY - VACANT",
"TOWN HOUSES",
"TOWNHOUSES - VACANT",
"TRAILER PARK",
"TRAILER PARK - VACANT")
jur <- jur %>%
mutate(residential =
ifelse(countylandusedescription %in% res_codes, 1, 0))
rm(res_codes)
other <- c("AUTO SALES",
"AUTOMOTIVE BUILDINGS",
"AUTOMOTIVE BUILDINGS",
"BANK",
"CEMETERY",
"CHURCH",
"COMMERCIAL",
"COMMERCIAL CONDO'S",
"COMMERCIAL CONDOS",
"CONDO-FLEX WAREHOUSE",
"CONDO-WAREHOUSE",
"DATA CENTER",
"EDUCATIONAL",
"FARM > 20 ACRES",
"FAST FOOD RESTAURANT",
"FIRE DEPT",
"FLEX WAREHOUSE",
"GAS AND GO",
"GOVERNMENT PROPERTY",
"GOVT PROP",
"GROCERY STORE",
"HANGER",
"HOTEL LUXURY",
"IMPROVED, USE NOT SPECIFIED",
"LEASEHOLD RIGHTS (MISC)",
"LIGHT INDUSTRIAL",
"MEDICAL BUILDING",
"MEDIUM/HEAVY INDUST ",
"MINI WAREHOUSE",
"MISC COMM STRUCTURE",
"MISC COMMERCIAL STRUCTURE",
"MISC IMPROVEMENTS",
"MISCELLANEOUS (GENERAL)",
"MOTEL/HOTEL",
"OFFICE BUILDING",
"OFFICE/RETAIL",
"RECREATIONAL",
"RESTAURANT",
"RETAIL STORE",
"SHOPPING CENTER",
"WAREHOUSE",
"WINERY")
mf <- c("DUPLEX",
"MULTI-FAMILY",
"MULTIPLE OCCUPANCIES",
"RESIDENTIAL CONDOS",
"CONDOMINIMUM (RESIDENTIAL)",
"RES CONDO GARAGE UNIT")
sf <- c("RURAL RESIDENCE (AGRICULTURAL)",
"SINGLE FAMILY",
"MOBILE/MANUFACTURED HOMES",
"TOWN HOUSES",
"TRAILER PARK")
vacant <- c("AUTOMOTIVE BUILDINGS - VACANT",
"COMMERCIAL CONDOS - VACANT",
"FLEX WAREHOUSE - VACANT",
"GROCERY STORE - VACANT",
"MINI WAREHOUSE - VACANT",
"MISC COMM STRUCTURE - VACANT",
"MISC COMMERCIAL STRUCTURE - VACANT",
"MISC IMPROVEMENTS - VACANT",
"MULTI-FAMILY - VACANT",
"OFFICE BUILDING - VACANT",
"RECREATIONAL - VACANT",
"RETAIL STORE - VACANT",
"SHOPPING CENTER - VACANT",
"SINGLE FAMILY - VACANT",
"TOWNHOUSES - VACANT",
"TRAILER PARK - VACANT",
"VACANT LAND",
"WAREHOUSE - VACANT",
"WINERY - VACANT")
jur <- jur %>%
mutate(category = case_when(
countylandusedescription %in% other ~ "other",
countylandusedescription %in% mf ~ "mf",
countylandusedescription %in% sf ~ "sf",
countylandusedescription %in% vacant ~ "vacant"))
rm(other, mf, sf, vacant)
other <- c("AUTO SALES",
"AUTOMOTIVE BUILDINGS",
"AUTOMOTIVE BUILDINGS",
"BANK",
"CEMETERY",
"CHURCH",
"COMMERCIAL",
"COMMERCIAL CONDO'S",
"COMMERCIAL CONDOS",
"CONDO-FLEX WAREHOUSE",
"CONDO-WAREHOUSE",
"DATA CENTER",
"EDUCATIONAL",
"FARM > 20 ACRES",
"FAST FOOD RESTAURANT",
"FIRE DEPT",
"FLEX WAREHOUSE",
"GAS AND GO",
"GOVERNMENT PROPERTY",
"GOVT PROP",
"GROCERY STORE",
"HANGER",
"HOTEL LUXURY",
"IMPROVED, USE NOT SPECIFIED",
"LEASEHOLD RIGHTS (MISC)",
"LIGHT INDUSTRIAL",
"MEDICAL BUILDING",
"MEDIUM/HEAVY INDUST ",
"MINI WAREHOUSE",
"MISC COMM STRUCTURE",
"MISC COMMERCIAL STRUCTURE",
"MISC IMPROVEMENTS",
"MISCELLANEOUS (GENERAL)",
"MOTEL/HOTEL",
"OFFICE BUILDING",
"OFFICE/RETAIL",
"RECREATIONAL",
"RESTAURANT",
"RETAIL STORE",
"SHOPPING CENTER",
"WAREHOUSE",
"WINERY")
mf <- c("DUPLEX",
"MULTI-FAMILY",
"MULTIPLE OCCUPANCIES",
"RESIDENTIAL CONDOS",
"CONDOMINIMUM (RESIDENTIAL)",
"RES CONDO GARAGE UNIT")
sf <- c("RURAL RESIDENCE (AGRICULTURAL)",
"SINGLE FAMILY",
"MOBILE/MANUFACTURED HOMES",
"TOWN HOUSES",
"TRAILER PARK")
vacant <- c("AUTOMOTIVE BUILDINGS - VACANT",
"COMMERCIAL CONDOS - VACANT",
"FLEX WAREHOUSE - VACANT",
"GROCERY STORE - VACANT",
"MINI WAREHOUSE - VACANT",
"MISC COMM STRUCTURE - VACANT",
"MISC COMMERCIAL STRUCTURE - VACANT",
"MISC IMPROVEMENTS - VACANT",
"MULTI-FAMILY - VACANT",
"OFFICE BUILDING - VACANT",
"RECREATIONAL - VACANT",
"RETAIL STORE - VACANT",
"SHOPPING CENTER - VACANT",
"SINGLE FAMILY - VACANT",
"TOWNHOUSES - VACANT",
"TRAILER PARK - VACANT",
"VACANT LAND",
"WAREHOUSE - VACANT",
"WINERY - VACANT")
jur <- jur %>%
mutate(category = case_when(
countylandusedescription %in% other ~ "other",
countylandusedescription %in% mf ~ "mf",
countylandusedescription %in% sf ~ "sf",
countylandusedescription %in% vacant ~ "vacant"))
rm(other, mf, sf, vacant)
