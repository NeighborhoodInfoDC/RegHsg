"SALES APPR CONDO/HIGH RISE") ~ "high-rise",
countylandusedescription %in%
c("SALES APPR CONDO/MID RISE",
"APARTMENT - MID-RISE") ~ "mid-rise",
countylandusedescription %in%
c("APARTMENT - PARKING") ~ "parking",
countylandusedescription %in%
c("SALES APPR CONDO/STACKED") ~ "stacked",
countylandusedescription %in%
c("SALES APPR CONDO/CO-OP") ~ "co-op")
)
res_codes <-
c("AFFORDABLE DWELLING UNIT",
"APARTMENT - GARDEN",
"APARTMENT - HIGH-RISE",
"APARTMENT - MID-RISE",
"APARTMENT - PARKING",
"COMMUNITY BENEFIT UNIT",
"MULTI-FAM IMPR/NO SITE PLAN",
"MULTI-FAM IMPR/SITE PLAN",
"MULTI-FAM VACANT/NO SITE PLAN",
"MULTI-FAM VACANT/SITE PLAN",
"NOT VALUED CONDO HOA",
"NOT VALUED COSTED - HOA/SITE PLAN",
"RESIDENTIAL COST-VAL - DUPLEX",
"RESIDENTIAL COST-VAL - IMPR/SF & TW",
"RESIDENTIAL COST-VAL - SIDE BY SIDE",
"RESIDENTIAL COST-VAL - SINGLE-FAM DET",
"RESIDENTIAL COST-VAL - TOWNHOUSE/CO",
"RESIDENTIAL COST-VAL - TOWNHOUSE/FSO",
"RESIDENTIAL COST-VAL - VAC/SF & TW",
"SALES APPR CONDO/CO-OP",
"SALES APPR CONDO/GARDEN",
"SALES APPR CONDO/HIGH RISE",
"SALES APPR CONDO/MID RISE",
"SALES APPR CONDO/STACKED",
"SFD - APT ZONED/NO SITE PLAN",
"SFD - APT ZONED/SITE PLAN",
"VACANT RESIDENTIAL")
currentjur_cat <- currentjur %>%
mutate(residential =
ifelse(countylandusedescription %in% res_codes, 1, 0),
category = case_when(
countylandusedescription %in%
c("COMMERCIAL CONDO",
"GEN COMM-IND - AUTO DEALERSHIP",
"GEN COMM-IND - SELF-STORAGE",
"GEN COMM-IND - SERVICE STATION",
"GEN COMM-IND - WAREHOUSE",
"GEN COMM - BANK",
"GEN COMM - FAST FOOD",
"GEN COMM - HEALTH CARE FACILITY",
"GEN COMM - MIXED OFFICE/COMM",
"GEN COMM - NEIGHBORHOOD CTR",
"GEN COMM - OTHER",
"GEN COMM - REST/EATING FACILITY",
"GEN COMM - RETAIL/STRIP",
"GEN COMM - SMALL OFFICE",
"GEN COMM IMPR-LAND/NO SITE PLAN",
"GEN COMM IMPR-LAND/SITE PLAN",
"GEN COMM/PARKING",
"HOTEL - FULL SERVICE",
"HOTEL - LAND/OTHER",
"HOTEL - LIMITED SERVICE",
"HOTEL - LODGING",
"HOTEL - SELECT DRIVE",
"HOTEL RESIDENCE SUITES",
"MIXED USE",
"SFD - COMM ZONED/NO SITE PLAN",
"SFD - COMM ZONED/SITE PLAN") ~ "commercial",
countylandusedescription %in%
c("AFFORDABLE DWELLING UNIT",
"APARTMENT - GARDEN",
"APARTMENT - HIGH-RISE",
"APARTMENT - MID-RISE",
"APARTMENT - PARKING",
"COMMUNITY BENEFIT UNIT",
"MULTI-FAM IMPR/NO SITE PLAN",
"MULTI-FAM IMPR/SITE PLAN",
"NOT VALUED CONDO HOA",
"RESIDENTIAL COST-VAL - DUPLEX",
"SALES APPR CONDO/CO-OP",
"SALES APPR CONDO/GARDEN",
"SALES APPR CONDO/HIGH RISE",
"SALES APPR CONDO/MID RISE",
"SALES APPR CONDO/STACKED",
"SFD - APT ZONED/NO SITE PLAN",
"SFD - APT ZONED/SITE PLAN") ~ "mf",
countylandusedescription %in%
c("OFFICE BLDG IMPR-LAND/SITE PLAN",
"OFFICE BLDG/7 OR MORE STORIES",
"OFFICE BLDG/PARKING",
"OFFICE BLDG/UNDER 7 STORIES") ~ "office",
countylandusedescription %in%
c("NOT VALUED COSTED - HOA/SITE PLAN",
"RESIDENTIAL COST-VAL - IMPR/SF & TW",
"RESIDENTIAL COST-VAL - SIDE BY SIDE",
"RESIDENTIAL COST-VAL - SINGLE-FAM DET",
"RESIDENTIAL COST-VAL - TOWNHOUSE/CO",
"RESIDENTIAL COST-VAL - TOWNHOUSE/FSO") ~ "sf",
countylandusedescription %in%
c("MULTI-FAM VACANT/NO SITE PLAN",
"MULTI-FAM VACANT/SITE PLAN",
"RESIDENTIAL COST-VAL - VAC/SF & TW",
"VACANT RESIDENTIAL",
"GEN COMM VAC-LAND/NO SITE PLAN",
"GEN COMM VAC-LAND/SITE PLAN",
"OFFICE BLDG VAC-LAND/NO SITE PLAN",
"OFFICE BLDG VAC-LAND/SITE PLAN",
"VACANT COMMERCIAL",
"VACANT EXEMPT",
"VACANT LIGHT INDUSTRIAL",
"VACANT OFFICE") ~ "vacant"),
category_detail = case_when(
countylandusedescription %in%
c("AFFORDABLE DWELLING UNIT",
"APARTMENT - GARDEN",
"APARTMENT - HIGH-RISE",
"APARTMENT - MID-RISE",
"APARTMENT - PARKING",
"COMMUNITY BENEFIT UNIT",
"MULTI-FAM IMPR/NO SITE PLAN",
"MULTI-FAM IMPR/SITE PLAN",
"SFD - APT ZONED/NO SITE PLAN",
"SFD - APT ZONED/SITE PLAN") ~ "apartment",
countylandusedescription %in%
c("COMMERCIAL CONDO",
"GEN COMM-IND - AUTO DEALERSHIP",
"GEN COMM-IND - SELF-STORAGE",
"GEN COMM-IND - SERVICE STATION",
"GEN COMM-IND - WAREHOUSE",
"GEN COMM - BANK",
"GEN COMM - FAST FOOD",
"GEN COMM - HEALTH CARE FACILITY",
"GEN COMM - MIXED OFFICE/COMM",
"GEN COMM - NEIGHBORHOOD CTR",
"GEN COMM - OTHER",
"GEN COMM - REST/EATING FACILITY",
"GEN COMM - RETAIL/STRIP",
"GEN COMM - SMALL OFFICE",
"GEN COMM IMPR-LAND/NO SITE PLAN",
"GEN COMM IMPR-LAND/SITE PLAN",
"GEN COMM/PARKING",
"HOTEL - FULL SERVICE",
"HOTEL - LAND/OTHER",
"HOTEL - LIMITED SERVICE",
"HOTEL - LODGING",
"HOTEL - SELECT DRIVE",
"HOTEL RESIDENCE SUITES",
"MIXED USE",
"SFD - COMM ZONED/NO SITE PLAN",
"SFD - COMM ZONED/SITE PLAN") ~ "commercial",
countylandusedescription %in%
c("NOT VALUED CONDO HOA",
"SALES APPR CONDO/CO-OP",
"SALES APPR CONDO/GARDEN",
"SALES APPR CONDO/HIGH RISE",
"SALES APPR CONDO/MID RISE",
"SALES APPR CONDO/STACKED") ~ "condo",
countylandusedescription %in%
c("RESIDENTIAL COST-VAL - DUPLEX") ~ "duplex",
countylandusedescription %in%
c("OFFICE BLDG IMPR-LAND/SITE PLAN",
"OFFICE BLDG/7 OR MORE STORIES",
"OFFICE BLDG/PARKING",
"OFFICE BLDG/UNDER 7 STORIES") ~ "office",
countylandusedescription %in%
c("RESIDENTIAL COST-VAL - SIDE BY SIDE") ~ "sf attached",
countylandusedescription %in%
c("NOT VALUED COSTED - HOA/SITE PLAN",
"RESIDENTIAL COST-VAL - IMPR/SF & TW",
"RESIDENTIAL COST-VAL - SINGLE-FAM DET") ~ "sf detached",
countylandusedescription %in%
c("RESIDENTIAL COST-VAL - TOWNHOUSE/CO",
"RESIDENTIAL COST-VAL - TOWNHOUSE/FSO") ~ "townhouse",
countylandusedescription %in%
c("GEN COMM VAC-LAND/NO SITE PLAN",
"GEN COMM VAC-LAND/SITE PLAN",
"VACANT COMMERCIAL") ~ "vacant commercial",
countylandusedescription %in%
c("VACANT EXEMPT") ~ "Vacant exempt",
countylandusedescription %in%
c("VACANT LIGHT INDUSTRIAL") ~ "vacant light industrial",
countylandusedescription %in%
c("MULTI-FAM VACANT/NO SITE PLAN",
"MULTI-FAM VACANT/SITE PLAN") ~ "vacant mf",
countylandusedescription %in%
c("OFFICE BLDG VAC-LAND/NO SITE PLAN",
"OFFICE BLDG VAC-LAND/SITE PLAN",
"VACANT OFFICE") ~ "vacant office",
countylandusedescription %in%
c("VACANT RESIDENTIAL") ~ "vacant residential",
countylandusedescription %in%
c("RESIDENTIAL COST-VAL - VAC/SF & TW") ~ "vacant sf"),
building_type = case_when(
countylandusedescription %in%
c("APARTMENT - GARDEN",
"SALES APPR CONDO/GARDEN") ~ "garden",
countylandusedescription %in%
c("APARTMENT - HIGH-RISE",
"SALES APPR CONDO/HIGH RISE") ~ "high-rise",
countylandusedescription %in%
c("SALES APPR CONDO/MID RISE",
"APARTMENT - MID-RISE") ~ "mid-rise",
countylandusedescription %in%
c("APARTMENT - PARKING") ~ "parking",
countylandusedescription %in%
c("SALES APPR CONDO/STACKED") ~ "stacked",
countylandusedescription %in%
c("SALES APPR CONDO/CO-OP") ~ "co-op",
countylandusedescription %in%
c("RESIDENTIAL COST-VAL - DUPLEX") ~ "duplex",
countylandusedescription %in%
c("AFFORDABLE DWELLING UNIT",
"COMMUNITY BENEFIT UNIT",
"MULTI-FAM IMPR/NO SITE PLAN",
"MULTI-FAM IMPR/SITE PLAN",
"NOT VALUED CONDO HOA") ~ "other")
)
sapt1 <- singles %>%
filter(category_detail == "apartment") %>%
select(propaddress, numberofunits,
lotsizeorarea, lotsizesquarefeet,
category, category_detail)
sapt1 <- singles %>%
filter(category_detail == "apartment") %>%
select(propaddress, numberofunits,
lotsizeorarea, lotsizesquarefeet,
category, category_detail)
sapt1 <- singles %>%
filter(category_detail == "apartment") %>%
select(propaddress, numberofunits,
lotsizeorarea, lotsizesquarefeet,
category, category_detail, countylandusedescription)
nrow(filter(currentjur_cat, building_type == "mf"))
nrow(filter(currentjur_cat, category == "mf"))
sum(!is.na(currentjur_cat$building_type))
sum(!is.na(currentjur_cat$building_type))
nrow(filter(currentjur_cat, category == "mf"))
currentjur_cat <- currentjur %>%
mutate(residential =
ifelse(countylandusedescription %in% res_codes, 1, 0),
category = case_when(
countylandusedescription %in%
c("COMMERCIAL CONDO",
"GEN COMM-IND - AUTO DEALERSHIP",
"GEN COMM-IND - SELF-STORAGE",
"GEN COMM-IND - SERVICE STATION",
"GEN COMM-IND - WAREHOUSE",
"GEN COMM - BANK",
"GEN COMM - FAST FOOD",
"GEN COMM - HEALTH CARE FACILITY",
"GEN COMM - MIXED OFFICE/COMM",
"GEN COMM - NEIGHBORHOOD CTR",
"GEN COMM - OTHER",
"GEN COMM - REST/EATING FACILITY",
"GEN COMM - RETAIL/STRIP",
"GEN COMM - SMALL OFFICE",
"GEN COMM IMPR-LAND/NO SITE PLAN",
"GEN COMM IMPR-LAND/SITE PLAN",
"GEN COMM/PARKING",
"HOTEL - FULL SERVICE",
"HOTEL - LAND/OTHER",
"HOTEL - LIMITED SERVICE",
"HOTEL - LODGING",
"HOTEL - SELECT DRIVE",
"HOTEL RESIDENCE SUITES",
"MIXED USE",
"SFD - COMM ZONED/NO SITE PLAN",
"SFD - COMM ZONED/SITE PLAN") ~ "commercial",
countylandusedescription %in%
c("AFFORDABLE DWELLING UNIT",
"APARTMENT - GARDEN",
"APARTMENT - HIGH-RISE",
"APARTMENT - MID-RISE",
"APARTMENT - PARKING",
"COMMUNITY BENEFIT UNIT",
"MULTI-FAM IMPR/NO SITE PLAN",
"MULTI-FAM IMPR/SITE PLAN",
"NOT VALUED CONDO HOA",
"RESIDENTIAL COST-VAL - DUPLEX",
"SALES APPR CONDO/CO-OP",
"SALES APPR CONDO/GARDEN",
"SALES APPR CONDO/HIGH RISE",
"SALES APPR CONDO/MID RISE",
"SALES APPR CONDO/STACKED",
"SFD - APT ZONED/NO SITE PLAN",
"SFD - APT ZONED/SITE PLAN") ~ "mf",
countylandusedescription %in%
c("OFFICE BLDG IMPR-LAND/SITE PLAN",
"OFFICE BLDG/7 OR MORE STORIES",
"OFFICE BLDG/PARKING",
"OFFICE BLDG/UNDER 7 STORIES") ~ "office",
countylandusedescription %in%
c("NOT VALUED COSTED - HOA/SITE PLAN",
"RESIDENTIAL COST-VAL - IMPR/SF & TW",
"RESIDENTIAL COST-VAL - SIDE BY SIDE",
"RESIDENTIAL COST-VAL - SINGLE-FAM DET",
"RESIDENTIAL COST-VAL - TOWNHOUSE/CO",
"RESIDENTIAL COST-VAL - TOWNHOUSE/FSO") ~ "sf",
countylandusedescription %in%
c("MULTI-FAM VACANT/NO SITE PLAN",
"MULTI-FAM VACANT/SITE PLAN",
"RESIDENTIAL COST-VAL - VAC/SF & TW",
"VACANT RESIDENTIAL",
"GEN COMM VAC-LAND/NO SITE PLAN",
"GEN COMM VAC-LAND/SITE PLAN",
"OFFICE BLDG VAC-LAND/NO SITE PLAN",
"OFFICE BLDG VAC-LAND/SITE PLAN",
"VACANT COMMERCIAL",
"VACANT EXEMPT",
"VACANT LIGHT INDUSTRIAL",
"VACANT OFFICE") ~ "vacant"),
category_detail = case_when(
countylandusedescription %in%
c("AFFORDABLE DWELLING UNIT",
"APARTMENT - GARDEN",
"APARTMENT - HIGH-RISE",
"APARTMENT - MID-RISE",
"APARTMENT - PARKING",
"COMMUNITY BENEFIT UNIT",
"MULTI-FAM IMPR/NO SITE PLAN",
"MULTI-FAM IMPR/SITE PLAN",
"SFD - APT ZONED/NO SITE PLAN",
"SFD - APT ZONED/SITE PLAN") ~ "apartment",
countylandusedescription %in%
c("COMMERCIAL CONDO",
"GEN COMM-IND - AUTO DEALERSHIP",
"GEN COMM-IND - SELF-STORAGE",
"GEN COMM-IND - SERVICE STATION",
"GEN COMM-IND - WAREHOUSE",
"GEN COMM - BANK",
"GEN COMM - FAST FOOD",
"GEN COMM - HEALTH CARE FACILITY",
"GEN COMM - MIXED OFFICE/COMM",
"GEN COMM - NEIGHBORHOOD CTR",
"GEN COMM - OTHER",
"GEN COMM - REST/EATING FACILITY",
"GEN COMM - RETAIL/STRIP",
"GEN COMM - SMALL OFFICE",
"GEN COMM IMPR-LAND/NO SITE PLAN",
"GEN COMM IMPR-LAND/SITE PLAN",
"GEN COMM/PARKING",
"HOTEL - FULL SERVICE",
"HOTEL - LAND/OTHER",
"HOTEL - LIMITED SERVICE",
"HOTEL - LODGING",
"HOTEL - SELECT DRIVE",
"HOTEL RESIDENCE SUITES",
"MIXED USE",
"SFD - COMM ZONED/NO SITE PLAN",
"SFD - COMM ZONED/SITE PLAN") ~ "commercial",
countylandusedescription %in%
c("NOT VALUED CONDO HOA",
"SALES APPR CONDO/CO-OP",
"SALES APPR CONDO/GARDEN",
"SALES APPR CONDO/HIGH RISE",
"SALES APPR CONDO/MID RISE",
"SALES APPR CONDO/STACKED") ~ "condo",
countylandusedescription %in%
c("RESIDENTIAL COST-VAL - DUPLEX") ~ "duplex",
countylandusedescription %in%
c("OFFICE BLDG IMPR-LAND/SITE PLAN",
"OFFICE BLDG/7 OR MORE STORIES",
"OFFICE BLDG/PARKING",
"OFFICE BLDG/UNDER 7 STORIES") ~ "office",
countylandusedescription %in%
c("RESIDENTIAL COST-VAL - SIDE BY SIDE") ~ "sf attached",
countylandusedescription %in%
c("NOT VALUED COSTED - HOA/SITE PLAN",
"RESIDENTIAL COST-VAL - IMPR/SF & TW",
"RESIDENTIAL COST-VAL - SINGLE-FAM DET") ~ "sf detached",
countylandusedescription %in%
c("RESIDENTIAL COST-VAL - TOWNHOUSE/CO",
"RESIDENTIAL COST-VAL - TOWNHOUSE/FSO") ~ "townhouse",
countylandusedescription %in%
c("GEN COMM VAC-LAND/NO SITE PLAN",
"GEN COMM VAC-LAND/SITE PLAN",
"VACANT COMMERCIAL") ~ "vacant commercial",
countylandusedescription %in%
c("VACANT EXEMPT") ~ "Vacant exempt",
countylandusedescription %in%
c("VACANT LIGHT INDUSTRIAL") ~ "vacant light industrial",
countylandusedescription %in%
c("MULTI-FAM VACANT/NO SITE PLAN",
"MULTI-FAM VACANT/SITE PLAN") ~ "vacant mf",
countylandusedescription %in%
c("OFFICE BLDG VAC-LAND/NO SITE PLAN",
"OFFICE BLDG VAC-LAND/SITE PLAN",
"VACANT OFFICE") ~ "vacant office",
countylandusedescription %in%
c("VACANT RESIDENTIAL") ~ "vacant residential",
countylandusedescription %in%
c("RESIDENTIAL COST-VAL - VAC/SF & TW") ~ "vacant sf"),
building_type = case_when(
countylandusedescription %in%
c("APARTMENT - GARDEN",
"SALES APPR CONDO/GARDEN") ~ "garden",
countylandusedescription %in%
c("APARTMENT - HIGH-RISE",
"SALES APPR CONDO/HIGH RISE") ~ "high-rise",
countylandusedescription %in%
c("SALES APPR CONDO/MID RISE",
"APARTMENT - MID-RISE") ~ "mid-rise",
countylandusedescription %in%
c("APARTMENT - PARKING") ~ "parking",
countylandusedescription %in%
c("SALES APPR CONDO/STACKED") ~ "stacked",
countylandusedescription %in%
c("SALES APPR CONDO/CO-OP") ~ "co-op",
countylandusedescription %in%
c("RESIDENTIAL COST-VAL - DUPLEX") ~ "duplex",
countylandusedescription %in%
c("AFFORDABLE DWELLING UNIT",
"COMMUNITY BENEFIT UNIT",
"MULTI-FAM IMPR/NO SITE PLAN",
"MULTI-FAM IMPR/SITE PLAN",
"NOT VALUED CONDO HOA",
"SFD - APT ZONED/NO SITE PLAN",
"SFD - APT ZONED/SITE PLAN") ~ "other")
)
sum(!is.na(currentjur_cat$building_type))
nrow(filter(currentjur_cat, category == "mf"))
count(currentjur_cat, lotsizeareaunit)
currentjur_cat <- currentjur_cat2 %>%
mutate(lotsize_acres = case_when(
lotsizeorarea == 0 ~ NA,
lotsizeareaunit == "AC" ~ lotsizeorarea,
lotsizeareaunit == "SF" ~ lotsizeorarea / 43560))
currentjur_cat <- currentjur_cat2 %>%
mutate(lotsize_acres = case_when(
lotsizeareaunit == "AC" ~ lotsizeorarea,
lotsizeareaunit == "SF" ~ lotsizeorarea / 43560))
lotsizeareaunit == "AC" ~ lotsizeorarea,
lotsizeareaunit == "AC" ~ lotsizeorarea,
currentjur_cat <- currentjur_cat2 %>%
mutate(lotsize_acres = case_when(
lotsizeareaunit == "AC" ~ lotsizeorarea ,
lotsizeareaunit == "SF" ~ lotsizeorarea / 43560),
lotsize_sf = lotsize_acres * 43560) %>%
mutate_at(vars(lotsize_acres, lotsize_sf), ~ replace(., .==0, NA))
View(currentjur_cat)
lotsizeareaunit == "AC" ~ lotsizeorarea ,
currentjur_cat <- currentjur_cat %>%
mutate(lotsize_acres = case_when(
lotsizeareaunit == "AC" ~ lotsizeorarea ,
lotsizeareaunit == "SF" ~ lotsizeorarea / 43560),
lotsize_sf = lotsize_acres * 43560) %>%
mutate_at(vars(lotsize_acres, lotsize_sf), ~ replace(., .==0, NA))
currentjur_cat2 <- currentjur_cat %>%
mutate(house_letter = ifelse(str_detect(prophouseno, "[:alpha:]") == 1, 1, 0),
oldadd = propaddress,
new_houseno = ifelse(house_letter == 1,
str_replace(prophouseno, "[:alpha:]", ""), prophouseno),
propaddress = ifelse(house_letter == 1,
paste(str_replace_all(new_houseno, "-", ""),
propstreetname,
propstreetsuffix,
sep = " "),
propaddress))
nrow(filter(currentjur_cat,
is.na(propaddress) | is.na(prophouseno)))
sum(is.na(currentjur_cat2$propaddress))
sum(is.na(currentjur_cat2$propaddress))
count(singles, category_detail)
View(multiples)
lotsizeareaunit == "AC" ~ lotsizeorarea ,
currentjur_cat <- currentjur_cat %>%
mutate(lotsize_acres = case_when(lotsizeareaunit == "AC" ~ lotsizeorarea ,
lotsizeareaunit == "SF" ~ lotsizeorarea / 43560),
lotsize_sf = lotsize_acres * 43560) %>%
mutate_at(vars(lotsize_acres, lotsize_sf), ~ replace(., .==0, NA))
currentjur_cat <- currentjur_cat %>%
mutate(parcel_address = substr(assessorsparcelnumberapnpin, 1, 5))
currentjur_cat %>%
group_by(propaddress) %>%
count() %>%
nrow()
currentjur_cat %>%
group_by(propaddress, parcel_address) %>%
count() %>%
nrow()
currentjur_cat %>%
group_by(propaddress, parcel_address) %>%
count() %>%
nrow()
currentjur_cat %>%
group_by(propaddress) %>%
count() %>%
nrow()
currentjur_cat %>%
filter(residential == 1) %>%
group_by(propaddress) %>%
count() %>%
nrow()
currentjur_cat %>%
filter(residential == 1) %>%
group_by(propaddress, parcel_address) %>%
count() %>%
nrow()
currentjur_cat <- currentjur_cat %>%
mutate(parcel_address = substr(assessorsparcelnumberapnpin, 1, 6))
currentjur_cat %>%
filter(residential == 1) %>%
group_by(propaddress) %>%
count() %>%
nrow()
currentjur_cat %>%
filter(residential == 1) %>%
group_by(propaddress, parcel_address) %>%
count() %>%
nrow()
